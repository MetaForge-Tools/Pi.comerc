<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Pi.comerc Store</title>
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>
        // 2. تفعيل الاتصال بالنظام
        Pi.init({ version: "2.0", sandbox: true });

        // 3. كود التعرف وفتح الاتصال بالمحفظة فور دخول المستخدم
        window.onload = function() {
            const scopes = ['username', 'payments'];
            function onIncompletePaymentFound(payment) { /* لمعالجة العمليات المعلقة */ }

            Pi.authenticate(scopes, onIncompletePaymentFound).then(function(auth) {
                console.log("تم التعرف على: " + auth.user.username);
                document.getElementById('user-name').innerText = "مرحباً: " + auth.user.username;
            }).catch(function(error) {
                console.error("خطأ في الاتصال:", error);
            });
        };
    </script>
</head>
<body style="text-align: center; padding: 50px; font-family: sans-serif;">
    <h1>مرحباً بك في متجر Pi.comerc</h1>
    <div id="user-name">جاري الاتصال بمحفظة باي...</div>
    <p>المتجر الآن جاهز ومعرف على الشبكة.</p>
</body>
</html>
